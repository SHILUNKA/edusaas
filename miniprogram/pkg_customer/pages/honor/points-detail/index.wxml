<view class="points-detail-container">
  <!-- æ€»ç§¯åˆ†å¡ç‰‡ -->
  <view class="total-card">
    <view class="total-label">ç´¯è®¡ç§¯åˆ†</view>
    <view class="total-value">{{totalPoints}}</view>
    <view class="total-desc">ç»§ç»­åŠ æ²¹ï¼Œäº‰å–æ›´é«˜è£èª‰ï¼</view>
  </view>

  <!-- ç§¯åˆ†è®°å½•åˆ—è¡¨ -->
  <scroll-view 
    scroll-y 
    class="records-list"
    refresher-enabled
    bindrefresherrefresh="onPullDownRefresh"
    bindscrolltolower="onLoadMore"
  >
    <view class="record-item" wx:for="{{records}}" wx:key="id">
      <view class="record-left">
        <view class="record-icon {{item.category}}">
          {{item.category === 'attendance' ? 'ğŸ“…' : item.category === 'homework' ? 'ğŸ“' : item.category === 'competition' ? 'ğŸ†' : item.category === 'activity' ? 'ğŸ¯' : 'â­'}}
        </view>
        <view class="record-info">
          <view class="record-reason">{{item.reason}}</view>
          <view class="record-category">{{categories[item.category]}}</view>
          <view class="record-time">{{formatDate(item.created_at)}}</view>
        </view>
      </view>
      
      <view class="record-points {{item.points > 0 ? 'positive' : 'negative'}}">
        {{item.points > 0 ? '+' : ''}}{{item.points}}
      </view>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-more" wx:if="{{loading}}">
      <text>åŠ è½½ä¸­...</text>
    </view>

    <!-- æ²¡æœ‰æ›´å¤š -->
    <view class="no-more" wx:if="{{!hasMore && records.length > 0}}">
      <text>æ²¡æœ‰æ›´å¤šäº†</text>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{records.length === 0 && !loading}}">
      <text class="empty-icon">ğŸ“Š</text>
      <text class="empty-text">è¿˜æ²¡æœ‰ç§¯åˆ†è®°å½•</text>
    </view>
  </scroll-view>
</view>
