<view class="report-container">
  <block wx:if="{{report}}">
    <!-- å­¦å‘˜åŸºæœ¬ä¿¡æ¯å¡ç‰‡ -->
    <view class="header-card">
      <view class="user-info">
        <text class="name">{{report.participant_name}}</text>
        <text class="rank" wx:if="{{report.rank_name}}">{{report.rank_name}}</text>
      </view>
      <view class="total-points">
        <text class="value">{{report.total_points}}</text>
        <text class="label">å½“å‰æ€»ç§¯åˆ†</text>
      </view>
    </view>

    <!-- å­¦ä¹ ç»Ÿè®¡å¡ç‰‡ -->
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-value">{{report.total_classes}}</text>
        <text class="stat-label">æ€»è¯¾ç¨‹æ•°</text>
      </view>
      <view class="stat-item">
        <text class="stat-value">{{report.attended_classes}}</text>
        <text class="stat-label">å·²å‡ºå‹¤æ•°</text>
      </view>
      <view class="stat-item highlight">
        <text class="stat-value">{{report.attendance_rate}}%</text>
        <text class="stat-label">å‡ºå‹¤ç‡</text>
      </view>
    </view>

    <!-- ç§¯åˆ†è¶‹åŠ¿å›¾è¡¨åŒºåŸŸ (ç®€åŒ–ç‰ˆ) -->
    <view class="section-card">
      <view class="section-title">å­¦ä¹ è¡¨ç°è¶‹åŠ¿ (æœ€è¿‘7å¤©ç§¯åˆ†)</view>
      <view class="trend-list" wx:if="{{report.points_trend.length > 0}}">
        <view class="trend-item" wx:for="{{report.points_trend}}" wx:key="date">
          <text class="date">{{item.date}}</text>
          <view class="trend-bar-bg">
            <view class="trend-bar-fill" style="width:{{item.points * 5}}rpx"></view>
          </view>
          <text class="points">+{{item.points}}</text>
        </view>
      </view>
      <view class="empty-hint" wx:else>æš‚æ— ç§¯åˆ†è®°å½•</view>
    </view>

    <!-- è€å¸ˆè¯„ä»·å¡ç‰‡ -->
    <view class="section-card feedback-section">
      <view class="section-title">è€å¸ˆæœ€æ–°è¯„ä»·</view>
      <view class="feedback-content" wx:if="{{report.latest_feedback}}">
        <text class="quote">â€œ</text>
        <text class="text">{{report.latest_feedback}}</text>
        <text class="quote">â€</text>
      </view>
      <view class="empty-hint" wx:else>æœ¬é˜¶æ®µæš‚æœªæ”¶åˆ°è€å¸ˆè¯„ä»·</view>
    </view>
  </block>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-state" wx:elif="{{!loading}}">
    <text class="empty-icon">ğŸ“Š</text>
    <text class="empty-text">æš‚æ— ç›¸å…³æŠ¥å‘Šæ•°æ®</text>
    <text class="empty-hint-sub">å­¦å‘˜è¯¾ç¨‹ã€ç§¯åˆ†ç­‰æ•°æ®å°†åœ¨è¿™é‡Œå±•ç¤º</text>
  </view>
</view>
