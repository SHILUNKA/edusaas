<view class="schedule-container">
  <!-- é¡¶éƒ¨ç­›é€‰æ  -->
  <view class="filter-bar">
    <view class="view-mode">
      <view 
        class="mode-btn {{viewMode === 'list' ? 'active' : ''}}"
        bindtap="onViewModeChange"
        data-mode="list"
      >
        åˆ—è¡¨
      </view>
      <view 
        class="mode-btn {{viewMode === 'calendar' ? 'active' : ''}}"
        bindtap="onViewModeChange"
        data-mode="calendar"
      >
        æœˆå†
      </view>
    </view>
    
    <view class="status-filter">
      <view 
        class="filter-btn {{filterStatus === 'all' ? 'active' : ''}}"
        bindtap="onFilterChange"
        data-status="all"
      >
        å…¨éƒ¨
      </view>
      <view 
        class="filter-btn {{filterStatus === 'upcoming' ? 'active' : ''}}"
        bindtap="onFilterChange"
        data-status="upcoming"
      >
        æœªä¸Šè¯¾
      </view>
      <view 
        class="filter-btn {{filterStatus === 'completed' ? 'active' : ''}}"
        bindtap="onFilterChange"
        data-status="completed"
      >
        å·²å®Œæˆ
      </view>
    </view>
  </view>

  <!-- è¯¾ç¨‹åˆ—è¡¨ -->
  <scroll-view scroll-y class="class-list" refresher-enabled bindrefresherrefresh="onPullDownRefresh">
    <view 
      class="class-card"
      wx:for="{{classes}}"
      wx:key="id"
      bindtap="onClassTap"
      data-id="{{item.id}}"
    >
      <view class="class-date">
        <text class="month-day">{{item.start_time}}</text>
      </view>
      
      <view class="class-content">
        <view class="course-name">{{item.course_name}}</view>
        <view class="class-meta">
          <text class="time">â° {{item.start_time}} - {{item.end_time}}</text>
          <text class="room">ğŸ“ {{item.room_name}}</text>
          <text class="teacher">ğŸ‘¨â€ğŸ« {{item.teacher_name}}</text>
        </view>
        
        <view class="enrollment-status">
          <view class="status-badge {{item.enrollment.status}}">
            {{item.enrollment.status === 'signed_in' ? 'å·²ç­¾åˆ°' : item.enrollment.status === 'absent' ? 'ç¼ºå‹¤' : 'å¾…ä¸Šè¯¾'}}
          </view>
          
          <text class="feedback-tip" wx:if="{{item.enrollment.teacher_feedback}}">
            ğŸ’¬ æœ‰è¯„ä»·
          </text>
        </view>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view class="empty-state" wx:if="{{classes.length === 0 && !loading}}">
      <text class="empty-icon">ğŸ“…</text>
      <text class="empty-text">æš‚æ— è¯¾ç¨‹å®‰æ’</text>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-state" wx:if="{{loading}}">
      <text>åŠ è½½ä¸­...</text>
    </view>
  </scroll-view>
</view>

<dynamic-tab-bar selected="1"></dynamic-tab-bar>
