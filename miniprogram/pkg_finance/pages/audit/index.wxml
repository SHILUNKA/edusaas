<view class="page">
  <view class="tabs">
    <view class="tab-item {{currentType === 'expense' ? 'active' : ''}}" bindtap="switchTab" data-type="expense">æŠ¥é”€</view>
    <view class="tab-item {{currentType === 'refund' ? 'active' : ''}}" bindtap="switchTab" data-type="refund">é€€è´¹</view>
    <view class="tab-item {{currentType === 'discount' ? 'active' : ''}}" bindtap="switchTab" data-type="discount">æŠ˜æ‰£</view>
    <view class="tab-item {{currentType === 'leave' ? 'active' : ''}}" bindtap="switchTab" data-type="leave">è¯·å‡</view>
  </view>

  <view class="list-container">
    <block wx:if="{{list.length > 0}}">
      <view class="audit-card" wx:for="{{list}}" wx:key="id">
        <view class="card-header">
          <text class="card-title">{{item.title}}</text>
          <text class="card-time">{{item.created_at_fmt}}</text>
        </view>
        
        <view class="card-body">
          <view class="info-row" wx:if="{{item.requester_name}}">
            <text class="info-label">ç”³è¯·äºº</text>
            <text class="info-val">{{item.requester_name}}</text>
          </view>
          <view class="info-row">
            <text class="info-label">è¯¦æƒ…</text>
            <text class="info-val">{{item.subtitle}}</text>
          </view>
          <view class="info-row" wx:if="{{item.amount_cents}}">
            <text class="info-label">æ¶‰åŠé‡‘é¢</text>
            <text class="info-val price">Â¥{{item.amount_fmt}}</text>
          </view>
          
          <view class="proof-area" wx:if="{{item.proof_url}}" bindtap="previewImage" data-url="{{item.proof_url}}">
             <view class="proof-btn">ğŸ“ æŸ¥çœ‹é™„ä»¶å‡­è¯</view>
          </view>
        </view>

        <view class="card-footer">
          <button class="btn btn-reject" bindtap="handleAction" data-action="reject" data-id="{{item.id}}">é©³å›</button>
          <button class="btn btn-approve" bindtap="handleAction" data-action="approve" data-id="{{item.id}}">åŒæ„</button>
        </view>
      </view>
    </block>
    
    <view class="empty-state" wx:else>
      <text>å½“å‰æš‚æ— å¾…å®¡æ‰¹äº‹é¡¹</text>
    </view>
  </view>
</view>
