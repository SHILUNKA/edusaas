<wxs module="utils">
  module.exports.formatMoney = function(cents) {
    if (!cents && cents !== 0) return '0.00';
    return (cents / 100).toFixed(2);
  }
</wxs>

<view class="container">
  <!-- èµ„é‡‘æ¦‚è§ˆ -->
  <view class="header-card">
    <view class="date-row">
        <text class="date">ä»Šæ—¥ Â· {{dateDesc}}</text>
        <view class="refresh-tips" wx:if="{{loading}}">æ›´æ–°ä¸­...</view>
    </view>
    <view class="balance-row">
      <view class="item">
        <view class="label">ä»Šæ—¥å®æ”¶ <text class="unit">(å…ƒ)</text></view>
        <view class="amount income">+{{utils.formatMoney(stats.today_income_cents)}}</view>
      </view>
      <view class="v-divider"></view>
      <view class="item">
        <view class="label">ä»Šæ—¥å®æ”¯ <text class="unit">(å…ƒ)</text></view>
        <view class="amount expense">-{{utils.formatMoney(stats.today_expense_cents)}}</view>
      </view>
    </view>
  </view>

  <!-- å¾…åŠä»»åŠ¡ -->
  <view class="section">
    <view class="section-header">
      <text class="title">å¾…åŠäº‹é¡¹</text>
      <text class="desc">Priority Tasks</text>
    </view>
    
    <view class="todo-list">
      <view class="todo-card" bindtap="navToAudit" data-type="income">
        <view class="icon-bg blue">
          <text class="emoji">ğŸ’°</text>
        </view>
        <view class="info">
          <view class="name">å¾…ç¡®è®¤æ”¶æ¬¾</view>
          <view class="sub">å­¦å‘˜è½¬è´¦å‡­è¯å®¡æ ¸</view>
        </view>
        <view class="badge" wx:if="{{stats.pending_incomes > 0}}">{{stats.pending_incomes}}</view>
        <view class="arr">></view>
      </view>

      <view class="todo-card" bindtap="navToAudit" data-type="expense">
        <view class="icon-bg orange">
          <text class="emoji">ğŸ’¸</text>
        </view>
        <view class="info">
          <view class="name">å¾…æ‰§è¡Œä»˜æ¬¾</view>
          <view class="sub">æŠ¥é”€æ‰“æ¬¾ä¸é€€è´¹</view>
        </view>
        <view class="badge" wx:if="{{stats.pending_expenses > 0}}">{{stats.pending_expenses}}</view>
        <view class="arr">></view>
      </view>
    </view>
  </view>

  <!-- å¸¸ç”¨åŠŸèƒ½ -->
  <view class="section">
    <view class="section-header">
      <text class="title">å¸¸ç”¨åŠŸèƒ½</text>
    </view>
    <view class="grid-menu">
      <view class="grid-item" bindtap="navToLedger">
        <view class="grid-icon-wrap ledger">
            <text class="emoji">ğŸ“’</text>
        </view>
        <text>æ”¶æ”¯æµæ°´</text>
      </view>
      <view class="grid-item" bindtap="navToBookkeeping">
        <view class="grid-icon-wrap book">
            <text class="emoji">ğŸ“</text>
        </view>
        <text>è®°ä¸€ç¬”</text>
      </view>
      <!-- é¢„ç•™ä½ç½® -->
       <view class="grid-item" bindtap="navToInvoice">
        <view class="grid-icon-wrap invoice">
            <text class="emoji">ğŸ§¾</text>
        </view>
        <text>å‘ç¥¨ç®¡ç†</text>
      </view>
    </view>
  </view>
</view>
